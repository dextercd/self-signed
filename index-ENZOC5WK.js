"use strict";(()=>{var tt=Object.create;var re=Object.defineProperty;var rt=Object.getOwnPropertyDescriptor;var nt=Object.getOwnPropertyNames;var jt=Object.getPrototypeOf,st=Object.prototype.hasOwnProperty;var it=(e,A)=>()=>(A||e((A={exports:{}}).exports,A),A.exports);var ot=(e,A,t,n)=>{if(A&&typeof A=="object"||typeof A=="function")for(let s of nt(A))!st.call(e,s)&&s!==t&&re(e,s,{get:()=>A[s],enumerable:!(n=rt(A,s))||n.enumerable});return e};var at=(e,A,t)=>(t=e!=null?tt(jt(e)):{},ot(A||!e||!e.__esModule?re(t,"default",{value:e,enumerable:!0}):t,e));var Be=it((TA,HA)=>{(function(e,A){typeof define=="function"&&define.amd?define([],A):typeof TA<"u"?A():(A(),e.FileSaver={})})(TA,function(){"use strict";function e(i,o){return typeof o>"u"?o={autoBom:!1}:typeof o!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(i.type)?new Blob(["\uFEFF",i],{type:i.type}):i}function A(i,o,l){var k=new XMLHttpRequest;k.open("GET",i),k.responseType="blob",k.onload=function(){j(k.response,o,l)},k.onerror=function(){console.error("could not download file")},k.send()}function t(i){var o=new XMLHttpRequest;o.open("HEAD",i,!1);try{o.send()}catch{}return 200<=o.status&&299>=o.status}function n(i){try{i.dispatchEvent(new MouseEvent("click"))}catch{var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),i.dispatchEvent(o)}}var s=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:void 0,r=s.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),j=s.saveAs||(typeof window!="object"||window!==s?function(){}:"download"in HTMLAnchorElement.prototype&&!r?function(i,o,l){var k=s.URL||s.webkitURL,a=document.createElement("a");o=o||i.name||"download",a.download=o,a.rel="noopener",typeof i=="string"?(a.href=i,a.origin===location.origin?n(a):t(a.href)?A(i,o,l):n(a,a.target="_blank")):(a.href=k.createObjectURL(i),setTimeout(function(){k.revokeObjectURL(a.href)},4e4),setTimeout(function(){n(a)},0))}:"msSaveOrOpenBlob"in navigator?function(i,o,l){if(o=o||i.name||"download",typeof i!="string")navigator.msSaveOrOpenBlob(e(i,l),o);else if(t(i))A(i,o,l);else{var k=document.createElement("a");k.href=i,k.target="_blank",setTimeout(function(){n(k)})}}:function(i,o,l,k){if(k=k||open("","_blank"),k&&(k.document.title=k.document.body.innerText="downloading..."),typeof i=="string")return A(i,o,l);var a=i.type==="application/octet-stream",f=/constructor/i.test(s.HTMLElement)||s.safari,u=/CriOS\/[\d]+/.test(navigator.userAgent);if((u||a&&f||r)&&typeof FileReader<"u"){var E=new FileReader;E.onloadend=function(){var d=E.result;d=u?d:d.replace(/^data:[^;]*;/,"data:attachment/file;"),k?k.location.href=d:location=d,k=null},E.readAsDataURL(i)}else{var p=s.URL||s.webkitURL,B=p.createObjectURL(i);k?k.location=B:location.href=B,k=null,setTimeout(function(){p.revokeObjectURL(B)},4e4)}});s.saveAs=j.saveAs=j,typeof HA<"u"&&(HA.exports=j)})});var _A,w,oe,lt,T,ne,ae,le,ke,FA,CA,bA,kt,nA={},ce=[],ct=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,pA=Array.isArray;function x(e,A){for(var t in A)e[t]=A[t];return e}function xA(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function ut(e,A,t){var n,s,r,j={};for(r in A)r=="key"?n=A[r]:r=="ref"?s=A[r]:j[r]=A[r];if(arguments.length>2&&(j.children=arguments.length>3?_A.call(arguments,2):t),typeof e=="function"&&e.defaultProps!=null)for(r in e.defaultProps)j[r]===void 0&&(j[r]=e.defaultProps[r]);return fA(e,j,n,s,null)}function fA(e,A,t,n,s){var r={type:e,props:A,key:t,ref:n,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:s??++oe,__i:-1,__u:0};return s==null&&w.vnode!=null&&w.vnode(r),r}function G(e){return e.children}function EA(e,A){this.props=e,this.context=A}function $(e,A){if(A==null)return e.__?$(e.__,e.__i+1):null;for(var t;A<e.__k.length;A++)if((t=e.__k[A])!=null&&t.__e!=null)return t.__e;return typeof e.type=="function"?$(e):null}function ue(e){var A,t;if((e=e.__)!=null&&e.__c!=null){for(e.__e=e.__c.base=null,A=0;A<e.__k.length;A++)if((t=e.__k[A])!=null&&t.__e!=null){e.__e=e.__c.base=t.__e;break}return ue(e)}}function je(e){(!e.__d&&(e.__d=!0)&&T.push(e)&&!dA.__r++||ne!==w.debounceRendering)&&((ne=w.debounceRendering)||ae)(dA)}function dA(){for(var e,A,t,n,s,r,j,i=1;T.length;)T.length>i&&T.sort(le),e=T.shift(),i=T.length,e.__d&&(t=void 0,s=(n=(A=e).__v).__e,r=[],j=[],A.__P&&((t=x({},n)).__v=n.__v+1,w.vnode&&w.vnode(t),GA(A.__P,t,n,A.__n,A.__P.namespaceURI,32&n.__u?[s]:null,r,s??$(n),!!(32&n.__u),j),t.__v=n.__v,t.__.__k[t.__i]=t,de(r,t,j),t.__e!=s&&ue(t)));dA.__r=0}function fe(e,A,t,n,s,r,j,i,o,l,k){var a,f,u,E,p,B,d=n&&n.__k||ce,q=A.length;for(o=ft(t,A,d,o,q),a=0;a<q;a++)(u=t.__k[a])!=null&&(f=u.__i===-1?nA:d[u.__i]||nA,u.__i=a,B=GA(e,u,f,s,r,j,i,o,l,k),E=u.__e,u.ref&&f.ref!=u.ref&&(f.ref&&KA(f.ref,null,u),k.push(u.ref,u.__c||E,u)),p==null&&E!=null&&(p=E),4&u.__u||f.__k===u.__k?o=Ee(u,o,e):typeof u.type=="function"&&B!==void 0?o=B:E&&(o=E.nextSibling),u.__u&=-7);return t.__e=p,o}function ft(e,A,t,n,s){var r,j,i,o,l,k=t.length,a=k,f=0;for(e.__k=new Array(s),r=0;r<s;r++)(j=A[r])!=null&&typeof j!="boolean"&&typeof j!="function"?(o=r+f,(j=e.__k[r]=typeof j=="string"||typeof j=="number"||typeof j=="bigint"||j.constructor==String?fA(null,j,null,null,null):pA(j)?fA(G,{children:j},null,null,null):j.constructor===void 0&&j.__b>0?fA(j.type,j.props,j.key,j.ref?j.ref:null,j.__v):j).__=e,j.__b=e.__b+1,i=null,(l=j.__i=Et(j,t,o,a))!==-1&&(a--,(i=t[l])&&(i.__u|=2)),i==null||i.__v===null?(l==-1&&(s>k?f--:s<k&&f++),typeof j.type!="function"&&(j.__u|=4)):l!=o&&(l==o-1?f--:l==o+1?f++:(l>o?f--:f++,j.__u|=4))):e.__k[r]=null;if(a)for(r=0;r<k;r++)(i=t[r])!=null&&!(2&i.__u)&&(i.__e==n&&(n=$(i)),pe(i,i));return n}function Ee(e,A,t){var n,s;if(typeof e.type=="function"){for(n=e.__k,s=0;n&&s<n.length;s++)n[s]&&(n[s].__=e,A=Ee(n[s],A,t));return A}e.__e!=A&&(A&&e.type&&!t.contains(A)&&(A=$(e)),t.insertBefore(e.__e,A||null),A=e.__e);do A=A&&A.nextSibling;while(A!=null&&A.nodeType==8);return A}function Et(e,A,t,n){var s,r,j=e.key,i=e.type,o=A[t];if(o===null&&e.key==null||o&&j==o.key&&i===o.type&&!(2&o.__u))return t;if(n>(o!=null&&!(2&o.__u)?1:0))for(s=t-1,r=t+1;s>=0||r<A.length;){if(s>=0){if((o=A[s])&&!(2&o.__u)&&j==o.key&&i===o.type)return s;s--}if(r<A.length){if((o=A[r])&&!(2&o.__u)&&j==o.key&&i===o.type)return r;r++}}return-1}function se(e,A,t){A[0]=="-"?e.setProperty(A,t??""):e[A]=t==null?"":typeof t!="number"||ct.test(A)?t:t+"px"}function uA(e,A,t,n,s){var r;A:if(A=="style")if(typeof t=="string")e.style.cssText=t;else{if(typeof n=="string"&&(e.style.cssText=n=""),n)for(A in n)t&&A in t||se(e.style,A,"");if(t)for(A in t)n&&t[A]===n[A]||se(e.style,A,t[A])}else if(A[0]=="o"&&A[1]=="n")r=A!=(A=A.replace(ke,"$1")),A=A.toLowerCase()in e||A=="onFocusOut"||A=="onFocusIn"?A.toLowerCase().slice(2):A.slice(2),e.l||(e.l={}),e.l[A+r]=t,t?n?t.t=n.t:(t.t=FA,e.addEventListener(A,r?bA:CA,r)):e.removeEventListener(A,r?bA:CA,r);else{if(s=="http://www.w3.org/2000/svg")A=A.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(A!="width"&&A!="height"&&A!="href"&&A!="list"&&A!="form"&&A!="tabIndex"&&A!="download"&&A!="rowSpan"&&A!="colSpan"&&A!="role"&&A!="popover"&&A in e)try{e[A]=t??"";break A}catch{}typeof t=="function"||(t==null||t===!1&&A[4]!="-"?e.removeAttribute(A):e.setAttribute(A,A=="popover"&&t==1?"":t))}}function ie(e){return function(A){if(this.l){var t=this.l[A.type+e];if(A.u==null)A.u=FA++;else if(A.u<t.t)return;return t(w.event?w.event(A):A)}}}function GA(e,A,t,n,s,r,j,i,o,l){var k,a,f,u,E,p,B,d,q,F,N,tA,_,b,K,L,U,S=A.type;if(A.constructor!==void 0)return null;128&t.__u&&(o=!!(32&t.__u),r=[i=A.__e=t.__e]),(k=w.__b)&&k(A);A:if(typeof S=="function")try{if(d=A.props,q="prototype"in S&&S.prototype.render,F=(k=S.contextType)&&n[k.__c],N=k?F?F.props.value:k.__:n,t.__c?B=(a=A.__c=t.__c).__=a.__E:(q?A.__c=a=new S(d,N):(A.__c=a=new EA(d,N),a.constructor=S,a.render=_t),F&&F.sub(a),a.props=d,a.state||(a.state={}),a.context=N,a.__n=n,f=a.__d=!0,a.__h=[],a._sb=[]),q&&a.__s==null&&(a.__s=a.state),q&&S.getDerivedStateFromProps!=null&&(a.__s==a.state&&(a.__s=x({},a.__s)),x(a.__s,S.getDerivedStateFromProps(d,a.__s))),u=a.props,E=a.state,a.__v=A,f)q&&S.getDerivedStateFromProps==null&&a.componentWillMount!=null&&a.componentWillMount(),q&&a.componentDidMount!=null&&a.__h.push(a.componentDidMount);else{if(q&&S.getDerivedStateFromProps==null&&d!==u&&a.componentWillReceiveProps!=null&&a.componentWillReceiveProps(d,N),!a.__e&&(a.shouldComponentUpdate!=null&&a.shouldComponentUpdate(d,a.__s,N)===!1||A.__v==t.__v)){for(A.__v!=t.__v&&(a.props=d,a.state=a.__s,a.__d=!1),A.__e=t.__e,A.__k=t.__k,A.__k.some(function(rA){rA&&(rA.__=A)}),tA=0;tA<a._sb.length;tA++)a.__h.push(a._sb[tA]);a._sb=[],a.__h.length&&j.push(a);break A}a.componentWillUpdate!=null&&a.componentWillUpdate(d,a.__s,N),q&&a.componentDidUpdate!=null&&a.__h.push(function(){a.componentDidUpdate(u,E,p)})}if(a.context=N,a.props=d,a.__P=e,a.__e=!1,_=w.__r,b=0,q){for(a.state=a.__s,a.__d=!1,_&&_(A),k=a.render(a.props,a.state,a.context),K=0;K<a._sb.length;K++)a.__h.push(a._sb[K]);a._sb=[]}else do a.__d=!1,_&&_(A),k=a.render(a.props,a.state,a.context),a.state=a.__s;while(a.__d&&++b<25);a.state=a.__s,a.getChildContext!=null&&(n=x(x({},n),a.getChildContext())),q&&!f&&a.getSnapshotBeforeUpdate!=null&&(p=a.getSnapshotBeforeUpdate(u,E)),L=k,k!=null&&k.type===G&&k.key==null&&(L=_e(k.props.children)),i=fe(e,pA(L)?L:[L],A,t,n,s,r,j,i,o,l),a.base=A.__e,A.__u&=-161,a.__h.length&&j.push(a),B&&(a.__E=a.__=null)}catch(rA){if(A.__v=null,o||r!=null)if(rA.then){for(A.__u|=o?160:128;i&&i.nodeType==8&&i.nextSibling;)i=i.nextSibling;r[r.indexOf(i)]=null,A.__e=i}else for(U=r.length;U--;)xA(r[U]);else A.__e=t.__e,A.__k=t.__k;w.__e(rA,A,t)}else r==null&&A.__v==t.__v?(A.__k=t.__k,A.__e=t.__e):i=A.__e=dt(t.__e,A,t,n,s,r,j,o,l);return(k=w.diffed)&&k(A),128&A.__u?void 0:i}function de(e,A,t){for(var n=0;n<t.length;n++)KA(t[n],t[++n],t[++n]);w.__c&&w.__c(A,e),e.some(function(s){try{e=s.__h,s.__h=[],e.some(function(r){r.call(s)})}catch(r){w.__e(r,s.__v)}})}function _e(e){return typeof e!="object"||e==null?e:pA(e)?e.map(_e):x({},e)}function dt(e,A,t,n,s,r,j,i,o){var l,k,a,f,u,E,p,B=t.props,d=A.props,q=A.type;if(q=="svg"?s="http://www.w3.org/2000/svg":q=="math"?s="http://www.w3.org/1998/Math/MathML":s||(s="http://www.w3.org/1999/xhtml"),r!=null){for(l=0;l<r.length;l++)if((u=r[l])&&"setAttribute"in u==!!q&&(q?u.localName==q:u.nodeType==3)){e=u,r[l]=null;break}}if(e==null){if(q==null)return document.createTextNode(d);e=document.createElementNS(s,q,d.is&&d),i&&(w.__m&&w.__m(A,r),i=!1),r=null}if(q===null)B===d||i&&e.data===d||(e.data=d);else{if(r=r&&_A.call(e.childNodes),B=t.props||nA,!i&&r!=null)for(B={},l=0;l<e.attributes.length;l++)B[(u=e.attributes[l]).name]=u.value;for(l in B)if(u=B[l],l!="children"){if(l=="dangerouslySetInnerHTML")a=u;else if(!(l in d)){if(l=="value"&&"defaultValue"in d||l=="checked"&&"defaultChecked"in d)continue;uA(e,l,null,u,s)}}for(l in d)u=d[l],l=="children"?f=u:l=="dangerouslySetInnerHTML"?k=u:l=="value"?E=u:l=="checked"?p=u:i&&typeof u!="function"||B[l]===u||uA(e,l,u,B[l],s);if(k)i||a&&(k.__html===a.__html||k.__html===e.innerHTML)||(e.innerHTML=k.__html),A.__k=[];else if(a&&(e.innerHTML=""),fe(A.type==="template"?e.content:e,pA(f)?f:[f],A,t,n,q=="foreignObject"?"http://www.w3.org/1999/xhtml":s,r,j,r?r[0]:t.__k&&$(t,0),i,o),r!=null)for(l=r.length;l--;)xA(r[l]);i||(l="value",q=="progress"&&E==null?e.removeAttribute("value"):E!==void 0&&(E!==e[l]||q=="progress"&&!E||q=="option"&&E!==B[l])&&uA(e,l,E,B[l],s),l="checked",p!==void 0&&p!==e[l]&&uA(e,l,p,B[l],s))}return e}function KA(e,A,t){try{if(typeof e=="function"){var n=typeof e.__u=="function";n&&e.__u(),n&&A==null||(e.__u=e(A))}else e.current=A}catch(s){w.__e(s,t)}}function pe(e,A,t){var n,s;if(w.unmount&&w.unmount(e),(n=e.ref)&&(n.current&&n.current!==e.__e||KA(n,null,A)),(n=e.__c)!=null){if(n.componentWillUnmount)try{n.componentWillUnmount()}catch(r){w.__e(r,A)}n.base=n.__P=null}if(n=e.__k)for(s=0;s<n.length;s++)n[s]&&pe(n[s],A,t||typeof e.type!="function");t||xA(e.__e),e.__c=e.__=e.__e=void 0}function _t(e,A,t){return this.constructor(e,t)}function pt(e,A,t){var n,s,r,j;A==document&&(A=document.documentElement),w.__&&w.__(e,A),s=(n=typeof t=="function")?null:t&&t.__k||A.__k,r=[],j=[],GA(A,e=(!n&&t||A).__k=ut(G,null,[e]),s||nA,nA,A.namespaceURI,!n&&t?[t]:s?null:A.firstChild?_A.call(A.childNodes):null,r,!n&&t?t:s?s.__e:A.firstChild,n,j),de(r,e,j)}function LA(e,A){pt(e,A,LA)}_A=ce.slice,w={__e:function(e,A,t,n){for(var s,r,j;A=A.__;)if((s=A.__c)&&!s.__)try{if((r=s.constructor)&&r.getDerivedStateFromError!=null&&(s.setState(r.getDerivedStateFromError(e)),j=s.__d),s.componentDidCatch!=null&&(s.componentDidCatch(e,n||{}),j=s.__d),j)return s.__E=s}catch(i){e=i}throw e}},oe=0,lt=function(e){return e!=null&&e.constructor==null},EA.prototype.setState=function(e,A){var t;t=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=x({},this.state),typeof e=="function"&&(e=e(x({},t),this.props)),e&&x(t,e),e!=null&&this.__v&&(A&&this._sb.push(A),je(this))},EA.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),je(this))},EA.prototype.render=G,T=[],ae=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,le=function(e,A){return e.__v.__b-A.__v.__b},dA.__r=0,ke=/(PointerCapture)$|Capture$/i,FA=0,CA=ie(!1),bA=ie(!0),kt=0;var Ze=at(Be());var P,v,DA,he,hA=0,Re=[],g=w,qe=g.__b,we=g.__r,me=g.diffed,ve=g.__c,ge=g.unmount,ye=g.__;function qA(e,A){g.__h&&g.__h(v,e,hA||A),hA=0;var t=v.__H||(v.__H={__:[],__h:[]});return e>=t.__.length&&t.__.push({}),t.__[e]}function I(e){return hA=1,Bt(Se,e)}function Bt(e,A,t){var n=qA(P++,2);if(n.t=e,!n.__c&&(n.__=[t?t(A):Se(void 0,A),function(i){var o=n.__N?n.__N[0]:n.__[0],l=n.t(o,i);o!==l&&(n.__N=[l,n.__[1]],n.__c.setState({}))}],n.__c=v,!v.__f)){var s=function(i,o,l){if(!n.__c.__H)return!0;var k=n.__c.__H.__.filter(function(f){return!!f.__c});if(k.every(function(f){return!f.__N}))return!r||r.call(this,i,o,l);var a=n.__c.props!==i;return k.forEach(function(f){if(f.__N){var u=f.__[0];f.__=f.__N,f.__N=void 0,u!==f.__[0]&&(a=!0)}}),r&&r.call(this,i,o,l)||a};v.__f=!0;var r=v.shouldComponentUpdate,j=v.componentWillUpdate;v.componentWillUpdate=function(i,o,l){if(this.__e){var k=r;r=void 0,s(i,o,l),r=k}j&&j.call(this,i,o,l)},v.shouldComponentUpdate=s}return n.__N||n.__}function H(e,A){var t=qA(P++,3);!g.__s&&Ne(t.__H,A)&&(t.__=e,t.u=A,v.__H.__h.push(t))}function jA(e){return hA=5,ht(function(){return{current:e}},[])}function ht(e,A){var t=qA(P++,7);return Ne(t.__H,A)&&(t.__=e(),t.__H=A,t.__h=e),t.__}function R(){var e=qA(P++,11);if(!e.__){for(var A=v.__v;A!==null&&!A.__m&&A.__!==null;)A=A.__;var t=A.__m||(A.__m=[0,0]);e.__="P"+t[0]+"-"+t[1]++}return e.__}function qt(){for(var e;e=Re.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(BA),e.__H.__h.forEach(MA),e.__H.__h=[]}catch(A){e.__H.__h=[],g.__e(A,e.__v)}}g.__b=function(e){v=null,qe&&qe(e)},g.__=function(e,A){e&&A.__k&&A.__k.__m&&(e.__m=A.__k.__m),ye&&ye(e,A)},g.__r=function(e){we&&we(e),P=0;var A=(v=e.__c).__H;A&&(DA===v?(A.__h=[],v.__h=[],A.__.forEach(function(t){t.__N&&(t.__=t.__N),t.u=t.__N=void 0})):(A.__h.forEach(BA),A.__h.forEach(MA),A.__h=[],P=0)),DA=v},g.diffed=function(e){me&&me(e);var A=e.__c;A&&A.__H&&(A.__H.__h.length&&(Re.push(A)!==1&&he===g.requestAnimationFrame||((he=g.requestAnimationFrame)||wt)(qt)),A.__H.__.forEach(function(t){t.u&&(t.__H=t.u),t.u=void 0})),DA=v=null},g.__c=function(e,A){A.some(function(t){try{t.__h.forEach(BA),t.__h=t.__h.filter(function(n){return!n.__||MA(n)})}catch(n){A.some(function(s){s.__h&&(s.__h=[])}),A=[],g.__e(n,t.__v)}}),ve&&ve(e,A)},g.unmount=function(e){ge&&ge(e);var A,t=e.__c;t&&t.__H&&(t.__H.__.forEach(function(n){try{BA(n)}catch(s){A=s}}),t.__H=void 0,A&&g.__e(A,t.__v))};var Ie=typeof requestAnimationFrame=="function";function wt(e){var A,t=function(){clearTimeout(n),Ie&&cancelAnimationFrame(A),setTimeout(e)},n=setTimeout(t,100);Ie&&(A=requestAnimationFrame(t))}function BA(e){var A=v,t=e.__c;typeof t=="function"&&(e.__c=void 0,t()),v=A}function MA(e){var A=v;e.__c=e.__(),v=A}function Ne(e,A){return!e||e.length!==A.length||A.some(function(t,n){return t!==e[n]})}function Se(e,A){return typeof A=="function"?A(e):A}var sA=class e{static read_bytes(A,t){let n=new e;return n.buf=A.getUint32(t,!0),n.buf_len=A.getUint32(t+4,!0),n}static read_bytes_array(A,t,n){let s=[];for(let r=0;r<n;r++)s.push(e.read_bytes(A,t+8*r));return s}},iA=class e{static read_bytes(A,t){let n=new e;return n.buf=A.getUint32(t,!0),n.buf_len=A.getUint32(t+4,!0),n}static read_bytes_array(A,t,n){let s=[];for(let r=0;r<n;r++)s.push(e.read_bytes(A,t+8*r));return s}},Oe=0,Ce=1,$A=2;var PA=2,J=3,VA=4;var wA=class{head_length(){return 24}name_length(){return this.dir_name.byteLength}write_head_bytes(A,t){A.setBigUint64(t,this.d_next,!0),A.setBigUint64(t+8,this.d_ino,!0),A.setUint32(t+16,this.dir_name.length,!0),A.setUint8(t+20,this.d_type)}write_name_bytes(A,t,n){A.set(this.dir_name.slice(0,Math.min(this.dir_name.byteLength,n)),t)}constructor(A,t,n){this.d_ino=1n;let s=new TextEncoder().encode(t);this.d_next=A,this.d_namlen=s.byteLength,this.d_type=n,this.dir_name=s}};var be=1;var V=class{write_bytes(A,t){A.setUint8(t,this.fs_filetype),A.setUint16(t+2,this.fs_flags,!0),A.setBigUint64(t+8,this.fs_rights_base,!0),A.setBigUint64(t+16,this.fs_rights_inherited,!0)}constructor(A,t){this.fs_rights_base=0n,this.fs_rights_inherited=0n,this.fs_filetype=A,this.fs_flags=t}};var vA=1,X=2,YA=4,JA=8,Y=class{write_bytes(A,t){A.setBigUint64(t,this.dev,!0),A.setBigUint64(t+8,this.ino,!0),A.setUint8(t+16,this.filetype),A.setBigUint64(t+24,this.nlink,!0),A.setBigUint64(t+32,this.size,!0),A.setBigUint64(t+38,this.atim,!0),A.setBigUint64(t+46,this.mtim,!0),A.setBigUint64(t+52,this.ctim,!0)}constructor(A,t){this.dev=0n,this.ino=0n,this.nlink=0n,this.atim=0n,this.mtim=0n,this.ctim=0n,this.filetype=A,this.size=t}};var mt=0,UA=class{write_bytes(A,t){A.setUint32(t,this.pr_name_len,!0)}constructor(A){this.pr_name_len=A}},mA=class e{static dir(A){let t=new e;return t.tag=mt,t.inner=new UA(A),t}write_bytes(A,t){A.setUint32(t,this.tag,!0),this.inner.write_bytes(A,t+4)}};var vt=class{enable(A){this.log=gt(A===void 0?!0:A,this.prefix)}get enabled(){return this.isEnabled}constructor(A){this.isEnabled=A,this.prefix="wasi:",this.enable(A)}};function gt(e,A){return e?console.log.bind(console,"%c%s","color: #265BA0",A):()=>{}}var y=new vt(!1);var oA=class extends Error{constructor(A){super("exit with exit code "+A),this.code=A}},XA=class{start(A){this.inst=A;try{return A.exports._start(),0}catch(t){if(t instanceof oA)return t.code;throw t}}initialize(A){this.inst=A,A.exports._initialize&&A.exports._initialize()}constructor(A,t,n,s={}){this.args=[],this.env=[],this.fds=[],y.enable(s.debug),this.args=A,this.env=t,this.fds=n;let r=this;this.wasiImport={args_sizes_get(j,i){let o=new DataView(r.inst.exports.memory.buffer);o.setUint32(j,r.args.length,!0);let l=0;for(let k of r.args)l+=k.length+1;return o.setUint32(i,l,!0),y.log(o.getUint32(j,!0),o.getUint32(i,!0)),0},args_get(j,i){let o=new DataView(r.inst.exports.memory.buffer),l=new Uint8Array(r.inst.exports.memory.buffer),k=i;for(let a=0;a<r.args.length;a++){o.setUint32(j,i,!0),j+=4;let f=new TextEncoder().encode(r.args[a]);l.set(f,i),o.setUint8(i+f.length,0),i+=f.length+1}return y.enabled&&y.log(new TextDecoder("utf-8").decode(l.slice(k,i))),0},environ_sizes_get(j,i){let o=new DataView(r.inst.exports.memory.buffer);o.setUint32(j,r.env.length,!0);let l=0;for(let k of r.env)l+=k.length+1;return o.setUint32(i,l,!0),y.log(o.getUint32(j,!0),o.getUint32(i,!0)),0},environ_get(j,i){let o=new DataView(r.inst.exports.memory.buffer),l=new Uint8Array(r.inst.exports.memory.buffer),k=i;for(let a=0;a<r.env.length;a++){o.setUint32(j,i,!0),j+=4;let f=new TextEncoder().encode(r.env[a]);l.set(f,i),o.setUint8(i+f.length,0),i+=f.length+1}return y.enabled&&y.log(new TextDecoder("utf-8").decode(l.slice(k,i))),0},clock_res_get(j,i){let o;switch(j){case 1:{o=5000n;break}case 0:{o=1000000n;break}default:return 52}return new DataView(r.inst.exports.memory.buffer).setBigUint64(i,o,!0),0},clock_time_get(j,i,o){let l=new DataView(r.inst.exports.memory.buffer);if(j===0)l.setBigUint64(o,BigInt(new Date().getTime())*1000000n,!0);else if(j==1){let k;try{k=BigInt(Math.round(performance.now()*1e6))}catch{k=0n}l.setBigUint64(o,k,!0)}else l.setBigUint64(o,0n,!0);return 0},fd_advise(j,i,o,l){return r.fds[j]!=null?r.fds[j].fd_advise(i,o,l):8},fd_allocate(j,i,o){return r.fds[j]!=null?r.fds[j].fd_allocate(i,o):8},fd_close(j){if(r.fds[j]!=null){let i=r.fds[j].fd_close();return r.fds[j]=void 0,i}else return 8},fd_datasync(j){return r.fds[j]!=null?r.fds[j].fd_datasync():8},fd_fdstat_get(j,i){if(r.fds[j]!=null){let{ret:o,fdstat:l}=r.fds[j].fd_fdstat_get();return l?.write_bytes(new DataView(r.inst.exports.memory.buffer),i),o}else return 8},fd_fdstat_set_flags(j,i){return r.fds[j]!=null?r.fds[j].fd_fdstat_set_flags(i):8},fd_fdstat_set_rights(j,i,o){return r.fds[j]!=null?r.fds[j].fd_fdstat_set_rights(i,o):8},fd_filestat_get(j,i){if(r.fds[j]!=null){let{ret:o,filestat:l}=r.fds[j].fd_filestat_get();return l?.write_bytes(new DataView(r.inst.exports.memory.buffer),i),o}else return 8},fd_filestat_set_size(j,i){return r.fds[j]!=null?r.fds[j].fd_filestat_set_size(i):8},fd_filestat_set_times(j,i,o,l){return r.fds[j]!=null?r.fds[j].fd_filestat_set_times(i,o,l):8},fd_pread(j,i,o,l,k){let a=new DataView(r.inst.exports.memory.buffer),f=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let u=sA.read_bytes_array(a,i,o),{ret:E,nread:p}=r.fds[j].fd_pread(f,u,l);return a.setUint32(k,p,!0),E}else return 8},fd_prestat_get(j,i){let o=new DataView(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let{ret:l,prestat:k}=r.fds[j].fd_prestat_get();return k?.write_bytes(o,i),l}else return 8},fd_prestat_dir_name(j,i,o){if(r.fds[j]!=null){let{ret:l,prestat_dir_name:k}=r.fds[j].fd_prestat_dir_name();return k!=null&&new Uint8Array(r.inst.exports.memory.buffer).set(k,i),l}else return 8},fd_pwrite(j,i,o,l,k){let a=new DataView(r.inst.exports.memory.buffer),f=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let u=iA.read_bytes_array(a,i,o),{ret:E,nwritten:p}=r.fds[j].fd_pwrite(f,u,l);return a.setUint32(k,p,!0),E}else return 8},fd_read(j,i,o,l){let k=new DataView(r.inst.exports.memory.buffer),a=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let f=sA.read_bytes_array(k,i,o),{ret:u,nread:E}=r.fds[j].fd_read(a,f);return k.setUint32(l,E,!0),u}else return 8},fd_readdir(j,i,o,l,k){let a=new DataView(r.inst.exports.memory.buffer),f=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let u=0;for(;;){let{ret:E,dirent:p}=r.fds[j].fd_readdir_single(l);if(E!=0)return a.setUint32(k,u,!0),E;if(p==null)break;if(o-u<p.head_length()){u=o;break}let B=new ArrayBuffer(p.head_length());if(p.write_head_bytes(new DataView(B),0),f.set(new Uint8Array(B).slice(0,Math.min(B.byteLength,o-u)),i),i+=p.head_length(),u+=p.head_length(),o-u<p.name_length()){u=o;break}p.write_name_bytes(f,i,o-u),i+=p.name_length(),u+=p.name_length(),l=p.d_next}return a.setUint32(k,u,!0),0}else return 8},fd_renumber(j,i){if(r.fds[j]!=null&&r.fds[i]!=null){let o=r.fds[i].fd_close();return o!=0?o:(r.fds[i]=r.fds[j],r.fds[j]=void 0,0)}else return 8},fd_seek(j,i,o,l){let k=new DataView(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let{ret:a,offset:f}=r.fds[j].fd_seek(i,o);return k.setBigInt64(l,f,!0),a}else return 8},fd_sync(j){return r.fds[j]!=null?r.fds[j].fd_sync():8},fd_tell(j,i){let o=new DataView(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let{ret:l,offset:k}=r.fds[j].fd_tell();return o.setBigUint64(i,k,!0),l}else return 8},fd_write(j,i,o,l){let k=new DataView(r.inst.exports.memory.buffer),a=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let f=iA.read_bytes_array(k,i,o),{ret:u,nwritten:E}=r.fds[j].fd_write(a,f);return k.setUint32(l,E,!0),u}else return 8},path_create_directory(j,i,o){let l=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let k=new TextDecoder("utf-8").decode(l.slice(i,i+o));return r.fds[j].path_create_directory(k)}},path_filestat_get(j,i,o,l,k){let a=new DataView(r.inst.exports.memory.buffer),f=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let u=new TextDecoder("utf-8").decode(f.slice(o,o+l)),{ret:E,filestat:p}=r.fds[j].path_filestat_get(i,u);return p?.write_bytes(a,k),E}else return 8},path_filestat_set_times(j,i,o,l,k,a,f){let u=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let E=new TextDecoder("utf-8").decode(u.slice(o,o+l));return r.fds[j].path_filestat_set_times(i,E,k,a,f)}else return 8},path_link(j,i,o,l,k,a,f){let u=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null&&r.fds[k]!=null){let E=new TextDecoder("utf-8").decode(u.slice(o,o+l)),p=new TextDecoder("utf-8").decode(u.slice(a,a+f));return r.fds[k].path_link(j,i,E,p)}else return 8},path_open(j,i,o,l,k,a,f,u,E){let p=new DataView(r.inst.exports.memory.buffer),B=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let d=new TextDecoder("utf-8").decode(B.slice(o,o+l));y.log(d);let{ret:q,fd_obj:F}=r.fds[j].path_open(i,d,k,a,f,u);if(q!=0)return q;r.fds.push(F);let N=r.fds.length-1;return p.setUint32(E,N,!0),0}else return 8},path_readlink(j,i,o,l,k,a){let f=new DataView(r.inst.exports.memory.buffer),u=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let E=new TextDecoder("utf-8").decode(u.slice(i,i+o));y.log(E);let{ret:p,data:B}=r.fds[j].path_readlink(E);if(B!=null){let d=new TextEncoder().encode(B);if(d.length>k)return f.setUint32(a,0,!0),8;u.set(d,l),f.setUint32(a,d.length,!0)}return p}else return 8},path_remove_directory(j,i,o){let l=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let k=new TextDecoder("utf-8").decode(l.slice(i,i+o));return r.fds[j].path_remove_directory(k)}else return 8},path_rename(j,i,o,l,k,a){throw"FIXME what is the best abstraction for this?"},path_symlink(j,i,o,l,k){let a=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[o]!=null){let f=new TextDecoder("utf-8").decode(a.slice(j,j+i)),u=new TextDecoder("utf-8").decode(a.slice(l,l+k));return r.fds[o].path_symlink(f,u)}else return 8},path_unlink_file(j,i,o){let l=new Uint8Array(r.inst.exports.memory.buffer);if(r.fds[j]!=null){let k=new TextDecoder("utf-8").decode(l.slice(i,i+o));return r.fds[j].path_unlink_file(k)}else return 8},poll_oneoff(j,i,o){throw"async io not supported"},proc_exit(j){throw new oA(j)},proc_raise(j){throw"raised signal "+j},sched_yield(){},random_get(j,i){let o=new Uint8Array(r.inst.exports.memory.buffer);for(let l=0;l<i;l++)o[j+l]=Math.random()*256|0},sock_recv(j,i,o){throw"sockets not supported"},sock_send(j,i,o){throw"sockets not supported"},sock_shutdown(j,i){throw"sockets not supported"},sock_accept(j,i){throw"sockets not supported"}}}};var D=class{fd_advise(A,t,n){return 0}fd_allocate(A,t){return 58}fd_close(){return 0}fd_datasync(){return 58}fd_fdstat_get(){return{ret:58,fdstat:null}}fd_fdstat_set_flags(A){return 58}fd_fdstat_set_rights(A,t){return 58}fd_filestat_get(){return{ret:58,filestat:null}}fd_filestat_set_size(A){return 58}fd_filestat_set_times(A,t,n){return 58}fd_pread(A,t,n){return{ret:58,nread:0}}fd_prestat_get(){return{ret:58,prestat:null}}fd_prestat_dir_name(){return{ret:58,prestat_dir_name:null}}fd_pwrite(A,t,n){return{ret:58,nwritten:0}}fd_read(A,t){return{ret:58,nread:0}}fd_readdir_single(A){return{ret:58,dirent:null}}fd_seek(A,t){return{ret:58,offset:0n}}fd_sync(){return 0}fd_tell(){return{ret:58,offset:0n}}fd_write(A,t){return{ret:58,nwritten:0}}path_create_directory(A){return 58}path_filestat_get(A,t){return{ret:58,filestat:null}}path_filestat_set_times(A,t,n,s,r){return 58}path_link(A,t,n,s){return 58}path_open(A,t,n,s,r,j){return{ret:58,fd_obj:null}}path_readlink(A){return{ret:58,data:null}}path_remove_directory(A){return 58}path_rename(A,t,n){return 58}path_symlink(A,t){return 58}path_unlink_file(A){return 58}};var W=class extends D{fd_allocate(A,t){if(!(this.file.size>A+t)){let n=new Uint8Array(Number(A+t));n.set(this.file.data,0),this.file.data=n}return 0}fd_fdstat_get(){return{ret:0,fdstat:new V(VA,0)}}fd_filestat_set_size(A){if(this.file.size>A)this.file.data=new Uint8Array(this.file.data.buffer.slice(0,Number(A)));else{let t=new Uint8Array(Number(A));t.set(this.file.data,0),this.file.data=t}return 0}fd_read(A,t){let n=0;for(let s of t)if(this.file_pos<this.file.data.byteLength){let r=this.file.data.slice(Number(this.file_pos),Number(this.file_pos+BigInt(s.buf_len)));A.set(r,s.buf),this.file_pos+=BigInt(r.length),n+=r.length}else break;return{ret:0,nread:n}}fd_pread(A,t,n){let s=0;for(let r of t)if(n<this.file.data.byteLength){let j=this.file.data.slice(Number(n),Number(n+BigInt(r.buf_len)));A.set(j,r.buf),n+=BigInt(j.length),s+=j.length}else break;return{ret:0,nread:s}}fd_seek(A,t){let n;switch(t){case Oe:n=A;break;case Ce:n=this.file_pos+A;break;case $A:n=BigInt(this.file.data.byteLength)+A;break;default:return{ret:28,offset:0n}}return n<0?{ret:28,offset:0n}:(this.file_pos=n,{ret:0,offset:this.file_pos})}fd_tell(){return{ret:0,offset:this.file_pos}}fd_write(A,t){let n=0;if(this.file.readonly)return{ret:8,nwritten:n};for(let s of t){let r=A.slice(s.buf,s.buf+s.buf_len);if(this.file_pos+BigInt(r.byteLength)>this.file.size){let j=this.file.data;this.file.data=new Uint8Array(Number(this.file_pos+BigInt(r.byteLength))),this.file.data.set(j)}this.file.data.set(r.slice(0,Number(this.file.size-this.file_pos)),Number(this.file_pos)),this.file_pos+=BigInt(r.byteLength),n+=s.buf_len}return{ret:0,nwritten:n}}fd_pwrite(A,t,n){let s=0;if(this.file.readonly)return{ret:8,nwritten:s};for(let r of t){let j=A.slice(r.buf,r.buf+r.buf_len);if(n+BigInt(j.byteLength)>this.file.size){let i=this.file.data;this.file.data=new Uint8Array(Number(n+BigInt(j.byteLength))),this.file.data.set(i)}this.file.data.set(j.slice(0,Number(this.file.size-n)),Number(n)),n+=BigInt(j.byteLength),s+=r.buf_len}return{ret:0,nwritten:s}}fd_filestat_get(){return{ret:0,filestat:this.file.stat()}}constructor(A){super(),this.file_pos=0n,this.file=A}};var lA=class extends D{fd_seek(A,t){return{ret:31,offset:0n}}fd_fdstat_get(){return{ret:0,fdstat:new V(J,0)}}fd_readdir_single(A){if(y.enabled&&(y.log("readdir_single",A),y.log(A,Object.keys(this.dir.contents))),y.log(A,Object.keys(this.dir.contents).slice(Number(A))),A>=BigInt(Object.keys(this.dir.contents).length))return{ret:0,dirent:null};let t=Object.keys(this.dir.contents)[Number(A)],n=this.dir.contents[t];return{ret:0,dirent:new wA(A+1n,t,n.stat().filetype)}}path_filestat_get(A,t){let n=this.dir.get_entry_for_path(t);return n==null?{ret:44,filestat:null}:{ret:0,filestat:n.stat()}}path_open(A,t,n,s,r,j){let i=this.dir.get_entry_for_path(t);if(i==null)if((n&vA)==vA)i=this.dir.create_entry_for_path(t,(n&X)==X);else return{ret:44,fd_obj:null};else if((n&YA)==YA)return{ret:20,fd_obj:null};if((n&X)==X&&i.stat().filetype!==J)return{ret:54,fd_obj:null};if(i.readonly&&(s&BigInt(64))==BigInt(64))return{ret:63,fd_obj:null};if(!(i instanceof z)&&(n&JA)==JA){let o=i.truncate();if(o!=0)return{ret:o,fd_obj:null}}return{ret:0,fd_obj:i.open(j)}}path_create_directory(A){return this.path_open(0,A,vA|X,0n,0n,0).ret}path_unlink_file(A){A=this.clean_path(A);let t=this.dir.get_parent_dir_for_path(A),n=A.split("/"),s=n[n.length-1],r=this.dir.get_entry_for_path(A);return r===null?44:r.stat().filetype===J?31:(delete t.contents[s],0)}path_remove_directory(A){A=this.clean_path(A);let t=this.dir.get_parent_dir_for_path(A),n=A.split("/"),s=n[n.length-1],r=this.dir.get_entry_for_path(A);return r===null?44:!(r instanceof z)||r.stat().filetype!==J?54:Object.keys(r.contents).length!==0?55:t.contents[s]===void 0?44:(delete t.contents[s],0)}clean_path(A){for(;A.length>0&&A[A.length-1]==="/";)A=A.slice(0,A.length-1);return A}constructor(A){super(),this.dir=A}},kA=class extends lA{fd_prestat_get(){return{ret:0,prestat:mA.dir(this.prestat_name.length)}}fd_prestat_dir_name(){return{ret:0,prestat_dir_name:this.prestat_name}}constructor(A,t){super(new z(t)),this.prestat_name=new TextEncoder().encode(A)}},C=class{open(A){let t=new W(this);return A&be&&t.fd_seek(0n,$A),t}get size(){return BigInt(this.data.byteLength)}stat(){return new Y(VA,this.size)}truncate(){return this.readonly?63:(this.data=new Uint8Array([]),0)}constructor(A,t){this.data=new Uint8Array(A),this.readonly=!!t?.readonly}};var z=class e{open(A){return new lA(this)}stat(){return new Y(J,0n)}get_entry_for_path(A){let t=this;for(let n of A.split("/")){if(n=="")break;if(n!="."){if(!(t instanceof e))return null;if(t.contents[n]!=null)t=t.contents[n];else return y.log(n),null}}return t}get_parent_dir_for_path(A){if(A==="")return null;let t=this,n=t;for(let s of A.split("/")){if(s==="")break;if(s!=="."){if(!(t instanceof e))return y.log(t),null;if(t.contents[s]===void 0)return y.log(s),null;n=t,t=t.contents[s]}}return n}create_entry_for_path(A,t){let n=this,s=A.split("/").filter(r=>r!="/");for(let r=0;r<s.length;r++){let j=s[r];if(!(n instanceof e))break;n.contents[j]!=null||(y.log("create",j),r==s.length-1&&!t?n.contents[j]=new C(new ArrayBuffer(0)):n.contents[j]=new e({})),n=n.contents[j]}return n}constructor(A){this.readonly=!1,this.contents=A}},Q=class e extends D{fd_filestat_get(){return{ret:0,filestat:new Y(PA,BigInt(0))}}fd_fdstat_get(){let A=new V(PA,0);return A.fs_rights_base=BigInt(64),{ret:0,fdstat:A}}fd_write(A,t){let n=0;for(let s of t){let r=A.slice(s.buf,s.buf+s.buf_len);this.write(r),n+=s.buf_len}return{ret:0,nwritten:n}}static lineBuffered(A){let t=new TextDecoder("utf-8",{fatal:!1}),n="";return new e(s=>{n+=t.decode(s,{stream:!0});let r=n.split(`
`);for(let[j,i]of r.entries())j<r.length-1?A(i):n=i})}constructor(A){super(),this.write=A}};var cA=class{data=new Uint8Array;size=0;addBytes(A){let t=this.size+A.byteLength;this.data.byteLength<t&&this.grow(t-this.data.byteLength),this.data.set(A,this.size),this.size=t}grow(A){let t=Math.ceil(A/1024)*1024,n=new Uint8Array(this.data.byteLength+t);n.set(this.data),this.data=n}addBool(A){this.addBytes(new Uint8Array([A&&1||0]))}addInt32(A){let t=new ArrayBuffer(4);new DataView(t).setInt32(0,A,!0),this.addBytes(new Uint8Array(t))}addUint32(A){let t=new ArrayBuffer(4);new DataView(t).setUint32(0,A,!0),this.addBytes(new Uint8Array(t))}addString(A){let t=new TextEncoder().encode(A);this.addUint32(t.byteLength),this.addBytes(t)}addByteArray(A){this.addUint32(A.byteLength),this.addBytes(new Uint8Array(A))}complete(){return new Uint8Array(this.data).subarray(0,this.size)}};var He="./sign-W4OANS2I.wasm";var yA={type:"ec",nistName:"P-256",otherName:"prime256v1"},Z=[yA,{type:"ec",nistName:"P-384",otherName:"secp384r1"},{type:"rsa",keyLength:2048,exponent:65537},{type:"rsa",keyLength:4096,exponent:65537}];function De(e){switch(e.type){case"rsa":return`RSA (${e.keyLength} bit)`;case"ec":return`EC ${e.nistName} (${e.otherName})`}}var IA={name:"SHA2-256"},AA=[{name:"SHA2-224"},IA,{name:"SHA2-384"},{name:"SHA2-512"}];var RA=(_=>(_[_.Success=0]="Success",_[_.ReadInput=100]="ReadInput",_[_.ReadCert=101]="ReadCert",_[_.ReadKey=102]="ReadKey",_[_.WriteCert=200]="WriteCert",_[_.WriteCertInfo=201]="WriteCertInfo",_[_.WriteKey=202]="WriteKey",_[_.CertSetSerial=300]="CertSetSerial",_[_.CertSetValidity=301]="CertSetValidity",_[_.CertSetIssuer=302]="CertSetIssuer",_[_.CertSetSubject=303]="CertSetSubject",_[_.CertSetKeyUsage=304]="CertSetKeyUsage",_[_.CertSetExtKeyUsage=305]="CertSetExtKeyUsage",_[_.CertSetSkid=306]="CertSetSkid",_[_.CertSetAkid=307]="CertSetAkid",_[_.CertSetSan=308]="CertSetSan",_[_.GenerateCert=400]="GenerateCert",_[_.GenerateKey=401]="GenerateKey",_[_.CertInfo=402]="CertInfo",_[_.KeyMismatch=403]="KeyMismatch",_[_.ConvertPem=404]="ConvertPem",_[_.OpenFile=405]="OpenFile",_))(RA||{}),eA=class extends Error{code;constructor(A){super(`InterfaceException: ${RA[A]}`),this.code=A}};var NA=class{data;offset=0;constructor(A){A instanceof ArrayBuffer||(A=A.buffer),this.data=new DataView(A)}read_bool(){return this.data.getInt8(this.offset++)!==0}read_uint(){let A=this.data.getUint32(this.offset,!0);return this.offset+=4,A}read_string(){let A=this.read_uint(),t=new Uint8Array(this.data.buffer,this.offset,A);return this.offset+=A,new TextDecoder().decode(t)}read_bytes(){let A=this.read_uint(),t=new Uint8Array(this.data.buffer,this.offset,A);return this.offset+=A,t}};function zA(e){if(e!==0)throw new eA(e)}function Me(e){let A=e.toISOString().substring(0,19);return Array.from(A).filter(t=>t>="0"&&t<="9").join("")}function St(e){let A=e.subjectName.trim();return A.includes("CN=")||e.sanList.length===0?A:[A,`CN=${e.sanList[0][1]}`].filter(Boolean).join(",")}var M=class e{wasi;instance;input;output;directory;constructor(A,t,n,s){this.wasi=A,this.input=t,this.output=n,this.directory=s}fillRandom(A,t){let n=this.instance.exports.memory.buffer;globalThis.crypto.getRandomValues(new Uint8Array(n,A,t))}static async make(){let A=new C([]),t=new C([]),n=[],s=[],r=new kA(".",{input:A,result:t}),j=[new W(new C([])),Q.lineBuffered(a=>console.log(`[WASI stdout] ${a}`)),Q.lineBuffered(a=>console.warn(`[WASI stderr] ${a}`)),r],i=new XA(n,s,j,{debug:!1}),o=new e(i,A,t,r),l=await WebAssembly.compileStreaming(fetch(He)),k=await WebAssembly.instantiate(l,{wasi_snapshot_preview1:i.wasiImport,crypto:{fill_random:o.fillRandom.bind(o)}});return i.initialize(k),o.instance=k,o}static pendingCertMaker;static async get(){return e.pendingCertMaker||(e.pendingCertMaker=e.make()),e.pendingCertMaker}setInput(A){this.input.truncate(),this.input.data=A.complete()}makeCertificate(A){this.output.truncate();let t=new C([],{readonly:!1}),n,s=new cA,r=St(A);s.addString(A.issuerName??r),s.addString(r),s.addBool(A.isCa),s.addBool(A.signMethod==="selfsigned"),A.signMethod==="selfsigned"?(n=new C([],{readonly:!1}),s.addString("")):(n=this.binaryFile(new TextEncoder().encode(A.signMethod.pem)),s.addByteArray(A.signMethod.akid)),this.directory.dir.contents.cert=t,this.directory.dir.contents.key=n,s.addUint32(A.sanList.length);for(let[i,o]of A.sanList)s.addUint32(i),s.addString(o);s.addUint32(Z.indexOf(A.keyGen)),s.addUint32(AA.indexOf(A.md)),s.addString(Me(A.validity.notBefore)),s.addString(Me(A.validity.notAfter)),s.addUint32(A.keyUsage),s.addUint32(A.extKeyUsage),this.setInput(s),zA(this.instance.exports.run());let j=new TextDecoder().decode(n.data);return{...this.resultCert(),keyPem:j}}binaryFile(A){let t=new cA;return t.addByteArray(A),new C(t.complete(),{readonly:!1})}getCertificateInfo(A){this.output.truncate();let t=this.binaryFile(A);return this.directory.dir.contents.cert=t,zA(this.instance.exports.cert_info()),this.resultCert()}getCertificateKeyInfo(A,t){this.output.truncate();let n=this.binaryFile(A),s=this.binaryFile(t);this.directory.dir.contents.cert=n,this.directory.dir.contents.key=s,zA(this.instance.exports.cert_key_info());let r=new TextDecoder().decode(s.data);return{...this.resultCert(),keyPem:r}}resultCert(){let A=this.directory.dir.contents.cert,t=new NA(A.data),n=t.read_string(),s=t.read_bool(),r=t.read_string(),j=t.read_bytes();return{certPem:n,isCa:s,subjectName:r,skid:j}}};var Ue=!1;function SA(){let[e,A]=I(Ue?2:0);return e!==2&&H(()=>{Ue=!0,A(1)},[]),e!==0}var Ot=0,Ur=Array.isArray;function c(e,A,t,n,s,r){A||(A={});var j,i,o=A;if("ref"in o)for(i in o={},A)i=="ref"?j=A[i]:o[i]=A[i];var l={type:e,props:o,key:t,ref:j,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:--Ot,__i:-1,__u:0,__source:s,__self:r};if(typeof e=="function"&&(j=e.defaultProps))for(i in j)o[i]===void 0&&(o[i]=j[i]);return w.vnode&&w.vnode(l),l}function $e(e){return e.toISOString().substring(0,19)}function Pe(e){let A=SA(),t=j=>{let i={type:"datetime-local",step:1,min:"1970-01-01T00:00:00",max:"9999-12-31T23:59:59",required:e.required};return A?{...i,...j}:{...i,disabled:!0}},n=j=>i=>{let o=i.currentTarget.value;if(!o)return;let[l,k]=o.split("T"),[a,f,u]=l.split("-"),[E,p,B]=k.split(":"),d=new Date(Date.UTC(parseInt(a),parseInt(f),parseInt(u),parseInt(E),parseInt(p),B?parseInt(B):0));e.onChange({...e.value,[j]:d})},s=R(),r=R();return c("div",{class:"fields",children:[c("div",{class:"field",children:[c("label",{for:s,children:"Not before:"}),c("input",{...t({value:$e(e.value.notBefore)}),id:s,onInput:n("notBefore")})]}),c("div",{class:"field",children:[c("label",{for:r,children:"Not after:"}),c("input",{...t({value:$e(e.value.notAfter)}),id:r,onInput:n("notAfter")})]})]})}function QA(e){switch(e){case 0:return"DNS";case 1:return"IP";case 2:return"EMAIL"}}function bt(e){switch(e){case 0:return{maxLength:253,pattern:"([0-9a-zA-Z_\\-]{1,63}|\\*)(.[0-9a-zA-Z_\\-]{1,63})*",class:"lower-case"};case 1:return{maxLength:39,pattern:"(((^|\\.)((25[0-5])|(2[0-4]\\d)|(1\\d\\d)|([1-9]?\\d))){4})|(([a-f0-9:]+:+)+[a-f0-9]+)$"};case 2:return{type:"email"}}}var Ft=/@[^@]*$/g;function xt(e,A){switch(e){case 0:return A.toLowerCase();case 2:return A.replaceAll(Ft,t=>t.toLowerCase());default:return A}}function Ve({value:e,onChange:A,id:t}){let[n,s]=I(0),[r,j]=I(""),i=jA(null),o=E=>{s(parseInt(E.currentTarget.value)),j("")},l=E=>{j(E.currentTarget.value)},k=()=>{if(!r||i.current&&!i.current.reportValidity())return;let E=xt(n,r);e.find(([B,d])=>B===n&&d===E)||A(e.concat([[n,E]])),j("")},a=E=>{E.preventDefault(),k()},f=E=>{E.key==="Enter"&&(E.preventDefault(),k())},u=E=>{let p=[...e];p.splice(E,1),A(p)};return c("div",{children:[c("select",{form:"disassociate-form","aria-label":"Name type",value:n,onChange:o,children:[c("option",{value:0,children:QA(0)}),c("option",{value:1,children:QA(1)})]})," ",c("input",{id:t,ref:i,form:"disassociate-form",value:r,onInput:l,onKeyPress:f,placeholder:n===0?"localhost":"127.0.0.1",...bt(n)},n)," ",c("button",{type:"button",onClick:a,children:"Add"}),c(Gt,{value:e,remove:u})]})}function Gt(e){return e.value.length===0?null:c("ul",{children:e.value.map(([A,t],n)=>c("li",{children:[c("button",{type:"button",onClick:()=>e.remove(n),children:"Remove"})," ",QA(A),": ",t]},n))})}var ZA=[128,64,32,16,8,4,2,1,32768];function Ye(e){switch(e){case 128:return"Digital Signature";case 64:return"Non Repudiation";case 32:return"Key Encipherment";case 16:return"Data Encipherment";case 8:return"Key Agreement";case 4:return"Certificate Sign";case 2:return"CRL Sign";case 1:return"Encipher Only";case 32768:return"Decipher Only";default:return""}}function Je({value:e,onChange:A}){let t=s=>()=>{A(e^s)},n=ZA.map(s=>R());return c("ul",{class:"checkbox-list",children:ZA.map((s,r)=>c("li",{children:[c("input",{id:n[r],type:"checkbox",checked:(e&s)!==0,onClick:t(s)}),c("label",{for:n[r],children:Ye(s)})]}))})}var Ae=[1,2,4,8,16,32,64];function Xe(e){switch(e){case 0:return"None";case 1:return"TLS Web Server Authentication";case 2:return"TLS Web Client Authentication";case 4:return"Code Signing";case 8:return"Email Protection";case 16:return"Time Stamping";case 32:return"Signing OCSP Responses";case 64:return"Any"}}function We({value:e,onChange:A}){let t=s=>()=>{A(e^s)},n=Ae.map(s=>R());return c("ul",{class:"checkbox-list",children:Ae.map((s,r)=>c("li",{children:[c("input",{id:n[r],type:"checkbox",checked:(e&s)!==0,onClick:t(s)}),c("label",{for:n[r],children:Xe(s)})]}))})}function Kt({value:e,onChange:A,id:t}){let n=Z.indexOf(e).toString(),s=j=>{let i=Z[parseInt(j.currentTarget.value)];A(i)},r;return e.type==="rsa"&&(e.keyLength>4e3?r="Generating an RSA key of this length can take multiple tens of seconds.":e.keyLength>2e3&&(r="Generating an RSA key of this length can take multiple seconds.")),c("div",{children:[r?c("p",{children:["Warning: ",r]}):null,c("select",{id:t,value:n,onChange:s,children:Z.map((j,i)=>c("option",{value:i,children:De(j)},i))})]})}function Lt({value:e,onChange:A,id:t}){let n=AA.indexOf(e).toString();return c("div",{children:c("select",{id:t,value:n,onChange:r=>{let j=AA[parseInt(r.currentTarget.value)];A(j)},children:AA.map((r,j)=>c("option",{value:j,children:r.name},j))})})}function ee(e){let{value:A,onChange:t}=e,n=d=>{t({...A,subjectName:d.currentTarget.value})},s=d=>{t({...A,sanList:d})},r=d=>{t({...A,validity:d})},j=d=>{t({...A,keyUsage:d})},i=d=>{t({...A,extKeyUsage:d})},o=()=>{t({...A,isCa:!A.isCa})},l=d=>{t({...A,keyGen:d})},k=d=>{t({...A,md:d})},a=R(),f=R(),u=R(),E=R(),p=R(),B=c(G,{children:[c("div",{class:"field",children:[c("label",{for:f,children:["Subject",e.lockSubject?" (Locked)":null,":"]}),c("input",{id:f,value:A.subjectName,onInput:n,title:"Optional. Comma separated list of element assignments, e.g., C=UK, O=Widget Corp.",disabled:e.lockSubject})]}),c("div",{class:"field",children:[c("label",{children:"Validity (UTC):"}),c(Pe,{value:A.validity,onChange:r,required:!0})]}),c("div",{class:"fields",children:[c("div",{class:"field",children:[c("label",{children:"Key Usage:"}),c(Je,{value:A.keyUsage,onChange:j})]}),c("div",{class:"field",children:[c("label",{children:"Extended Key Usage:"}),c(We,{value:A.extKeyUsage,onChange:i})]})]}),c("div",{class:"field",children:c("div",{children:[c("label",{for:u,children:"Is CA:"}),c("input",{id:u,type:"checkbox",checked:e.lockCa,onClick:o,disabled:e.lockCa})]})}),c("div",{class:"fields",children:[c("div",{class:"field",children:[c("label",{for:E,children:"Key Algorithm:"}),c(Kt,{id:E,value:A.keyGen,onChange:l})]}),c("div",{class:"field",children:[c("label",{for:p,children:"Signing MD:"}),c(Lt,{id:p,value:A.md,onChange:k})]})]})]});return c("fieldset",{disabled:e.disabled,children:[c("div",{class:"field",children:[c("label",{for:a,children:"SAN List:"}),c(Ve,{id:a,value:A.sanList,onChange:s})]}),e.hideAdvanced?c("details",{children:[c("summary",{children:"Advanced Settings"}),B]}):c(G,{children:B})]})}var te=new Int32Array(256);{let e=1;for(let A=128;A>0;A>>=1){e&1?e=e>>>1^3988292384:e=e>>>1;for(let t=0;t<=255;t+=A*2)te[A+t]=e^te[t]}}function Tt(e){let A=new Uint8Array(e),t=-1;for(let n=0;n!=A.length;++n){let s=(t^A[n])&255;t=t>>>8^te[s]}return(t^-1)>>>0}function Ht(e){return e.getDate()|e.getMonth()+1<<5|(e.getFullYear()-1980&127)<<9}function Dt(e){return e.getSeconds()>>1|e.getMinutes()<<5|e.getHours()<<11}var ze=4,Mt=new Uint8Array([80,75,3,4]),Ut=new Uint8Array([80,75,1,2]),$t=2,Pt=new Uint8Array([30,3]),OA=class{files=[];addFile(A,t,n=33188<<16){this.files.push([A,t,n])}complete(){let A=0,t=[],n=0,s=[],r=new Date,j=Ht(r),i=Dt(r);for(let[l,k,a]of this.files){let f=A,u=new TextEncoder().encode(l),E=new DataView(new ArrayBuffer(26));E.setInt16(0,10,!0),E.setUint16(6,i,!0),E.setUint16(8,j,!0),E.setUint32(10,Tt(k),!0),E.setUint32(14,k.byteLength,!0),E.setUint32(18,k.byteLength,!0),E.setInt16(22,u.byteLength,!0),t.push(Mt,E,u,k),A+=ze+E.byteLength+u.byteLength+k.byteLength;let p=new DataView(new ArrayBuffer(14));p.setInt32(6,a,!0),p.setUint32(10,f,!0),s.push(Ut,Pt,E,p,u),n+=ze+$t+E.byteLength+p.byteLength+u.byteLength}let o=new DataView(new ArrayBuffer(22));return o.setUint32(0,101010256,!0),o.setUint16(8,s.length/5,!0),o.setUint16(10,s.length/5,!0),o.setUint32(12,n,!0),o.setUint32(16,A,!0),new Blob([...t,...s,o],{type:"application/zip"})}};function Vt(e){return c("div",{children:[c("button",{type:"button",onClick:e.onStartNewCertificate,disabled:!e.certificateGenerated,children:"New CA certificate"}),c("details",{children:[c("summary",{children:"CA Certificate Details"}),c(ee,{value:e.value,onChange:e.onChange,lockCa:!0,lockSubject:!0,disabled:e.certificateGenerated})]})]})}function Qe(e,A){let t=new DataTransfer;A&&t.items.add(A),e.files=t.files}function Yt(e){let A=i=>{let o;i.currentTarget.files&&(o=i.currentTarget.files[0]),e.onCertFile(o)},t=i=>{let o;i.currentTarget.files&&(o=i.currentTarget.files[0]),e.onKeyFile(o)},n=jA(null),s=jA(null);H(()=>{n.current&&Qe(n.current,e.certFile),s.current&&Qe(s.current,e.keyFile)},[]),H(()=>{n.current&&(n.current.setCustomValidity(e.certError??""),e.certError&&n.current.reportValidity())},[e.certError]),H(()=>{s.current&&(s.current.setCustomValidity(e.keyError??""),e.keyError&&s.current.reportValidity())},[e.keyError]);let r=R(),j=R();return c("div",{children:[c("div",{children:[c("label",{for:r,children:"Certificate: "}),c("input",{id:r,ref:n,type:"file",onChange:A,required:e.required})]}),c("div",{children:[c("label",{for:j,children:"Key: "}),c("input",{id:j,ref:s,type:"file",onChange:t,required:e.required})]}),e.certInfo?c("div",{children:[c("p",{children:["Certificate: ",e.certInfo.subjectName]}),e.certInfo.isCa?null:c("p",{class:"warning",children:"Not marked as a CA certificate. Programs are likely to reject certificates signed by this certificate."})]}):null]})}function Jt(){return c("div",{children:[c("p",{children:"Selecting this tab means the generated certificate won't be signed by a CA certificate. Instead, it will create a single self-signed certificate that's not part of a certificate chain."}),c("p",{children:"This is not recommended because it means your end/leaf certificate also acts as its own authority. Firefox does not accept these certificates and, depending on the certificate's settings, Chrome refuses to import it through Chrome's certificate management UI on Linux."}),c("p",{children:"But hey, if none of that is an issue for you, then you can try this. :^)"})]})}function Xt(e){let[A,t]=I(),[n,s]=I(),r=A===e.caCertSettings,[j,i]=I(),[o,l]=I(),[k,a]=I(),[f,u]=I(),[E,p]=I(),[B,d]=I(0),q=_=>{if(B===0){let b=n;if(A!==e.caCertSettings&&(b=_.makeCertificate({...e.caCertSettings,issuerName:e.caCertSettings.subjectName,signMethod:"selfsigned"}),s(b),t(e.caCertSettings)),b===void 0)throw Error("Assertion failed");return b}if(B===1){if(!E)throw Error("Missing or bad CA files");if(!("keyPem"in E))throw Error("No key");return E}if(B===2)return"selfsigned";throw Error("Unhandled CA tab")},F=_=>{if(_ instanceof eA){if(_.code==101){a("Error reading certificate file.");return}if(_.code==102){u("Error reading private key file.");return}if(_.code==403){u("Private key doesn't match the supplied certificates.");return}}a(`Unexpected error: ${_.toString()}`)};H(()=>{if(p(void 0),a(void 0),u(void 0),!j)return;let _=!1;return j.arrayBuffer().then(async b=>{let K;o&&(K=await o.arrayBuffer());let L=await M.get();if(_)return;let U;try{U=K?L.getCertificateKeyInfo(b,K):L.getCertificateInfo(b)}catch(S){F(S);return}p(U)}),()=>{_=!0}},[j,o]);let N=()=>{t(void 0)};return{ui:c("div",{class:"tabcontainer",children:[c("div",{class:"tabbar",children:[c("button",{type:"button",onClick:()=>d(0),"data-active":B===0,children:"Configure"}),c("button",{type:"button",onClick:()=>d(1),"data-active":B===1,children:"Use Files..."}),c("button",{type:"button",onClick:()=>d(2),"data-active":B===2,children:"None"})]}),c("div",{class:"tabcontent",children:[B===0?c(Vt,{value:e.caCertSettings,onChange:e.setCaCertSettings,certificateGenerated:r,onStartNewCertificate:N}):null,B===1?c(Yt,{certFile:j,keyFile:o,onCertFile:i,onKeyFile:l,certInfo:E,certError:k,keyError:f,required:!0}):null,B===2?c(Jt,{}):null]})]}),getCertificate:q}}function At(e){let A=new Date;A.setUTCHours(A.getUTCHours()-1);let t=new Date(A);return t.setUTCFullYear(t.getUTCFullYear()+e),{notBefore:A,notAfter:t}}var Wt=()=>At(10),zt=()=>At(1);function Qt(e){let A=SA(),[t,n]=I({subjectName:"C=NL, O=AAASELFSIGNED, OU=dexter.dpping.eu/self-signed, CN=AAATESTCA",sanList:[],keyGen:yA,md:IA,validity:Wt(),keyUsage:4,extKeyUsage:0,isCa:!0}),[s,r]=I({subjectName:"",sanList:[],keyGen:yA,md:IA,validity:zt(),keyUsage:128,extKeyUsage:3,isCa:!1}),j=Xt({caCertSettings:t,setCaCertSettings:n});return c("form",{onSubmit:async o=>{o.preventDefault();try{let l=await M.get(),k=j.getCertificate(l),a={...s,signMethod:"selfsigned",issuerName:void 0};k!=="selfsigned"&&(a.issuerName=k.subjectName,a.signMethod={pem:k.keyPem,akid:k.skid});let f=l.makeCertificate(a),u={endCert:f.certPem,endKey:f.keyPem,endSettings:a};k!=="selfsigned"&&(u.caCert=k.certPem,u.caKey=k.keyPem),e.onResult(u)}catch(l){e.onError(l)}},autocomplete:"off",inert:!A,children:[c("h2",{children:"CA Certificate"}),c("p",{children:'Generally, using the "Configure" tab and its default settings should be fine. If you want to use an existing CA certificate, then switch to the "Use Files..." tab.'}),j.ui,c("h2",{children:"End Certificate"}),c("p",{children:"For web development, you can add your domains to the SAN list and keep everything else on the default settings."}),c(ee,{value:s,onChange:r,hideAdvanced:!0}),c("button",{children:"Make Certificates"})]})}function Zt(e){let A=e.subjectName.match(/\bCN=([^,]*)/);if(A){let t=A[1].trim();if(t)return t}for(let[t,n]of e.sanList)if(t===0)return n.replace("*","star");return"cert"}function Ar(e){let A=Zt(e);return A=A.replaceAll(/[^-.a-zA-Z0-9]/g,""),A||(A="cert"),A}function et(){let[e,A]=I();return c("div",{children:[c("form",{id:"disassociate-form",autocomplete:"off",style:"display:none"}),c("noscript",{children:c("p",{children:"You need JavaScript enabled to use this site."})}),c(Qt,{onResult:n=>{A(void 0);let s=Ar(n.endSettings),r=new OA;r.addFile(`${s}/${s}.crt`,new TextEncoder().encode(n.endCert)),r.addFile(`${s}/${s}.key`,new TextEncoder().encode(n.endKey)),n.caCert&&r.addFile(`${s}/ca_cert.crt`,new TextEncoder().encode(n.caCert)),n.caKey&&r.addFile(`${s}/ca_cert.key`,new TextEncoder().encode(n.caKey)),(0,Ze.saveAs)(r.complete(),`${s}.zip`)},onError:A}),e?c("p",{class:"error",children:["Creating certificate(s): ",e.toString()]}):null]})}function er(e){document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}M.get();er(()=>{LA(c(et,{}),document.getElementById("app"))});})();
